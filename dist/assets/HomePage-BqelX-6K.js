import{j as e}from"./ui-DVmofzuT.js";import{r as i,L as u}from"./vendor-Bh044VG2.js";import{s as g}from"./index-BMdVCYPh.js";import{c as f,g as h}from"./categoryService-BgLIrQg1.js";import"./three-DA2LJXh8.js";function w(){const[n,o]=i.useState([]),[s,l]=i.useState(null),[c,d]=i.useState(!0);i.useEffect(()=>{m()},[]);async function m(){try{const{data:a,error:r}=await g.from("posts").select("*").eq("published",!0).order("created_at",{ascending:!1});if(r)throw r;const x=(a||[]).filter(t=>t.id).map(t=>(t.category_ml||(t.category_ml=f(t.content)),t));o(x)}catch(a){console.error("Error fetching posts:",a)}finally{d(!1)}}return c?e.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 border-4 border-accent border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"min-h-screen bg-bg-primary pt-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx("h1",{className:"text-5xl font-bold text-text-primary mb-2 animate-fade-in",children:"Latest Blog Posts"}),e.jsx("div",{className:"h-1 w-24 bg-accent mb-12 animate-slide-up"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map((a,r)=>a.id?e.jsx(u,{to:`/blog/${a.id}`,className:"group relative block animate-fade-in",style:{animationDelay:`${r*.1}s`},onMouseEnter:()=>l(a.id),onMouseLeave:()=>l(null),children:e.jsxs("div",{className:`
                  relative overflow-hidden rounded-xl transition-all duration-500 ease-out
                  transform-gpu ${s===a.id?"scale-[1.02] shadow-lg":"shadow-md"}
                `,children:[e.jsxs("div",{className:"aspect-w-16 aspect-h-9 bg-bg-secondary",children:[e.jsx("img",{src:a.featured_image||"/default-blog-image.jpg",alt:a.title,className:"w-full h-full object-cover transition-transform duration-500 ease-out"}),e.jsx("div",{className:`
                      absolute inset-0 bg-gradient-to-t from-bg-primary via-bg-primary/80 to-transparent
                      transition-opacity duration-300
                      ${s===a.id?"opacity-90":"opacity-70"}
                    `})]}),e.jsxs("div",{className:"absolute inset-0 p-6 flex flex-col justify-end",children:[a.category_ml&&e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"px-3 py-1 text-sm font-medium text-white rounded-full",style:{backgroundColor:h(a.category_ml)},children:a.category_ml})}),e.jsx("h2",{className:`
                      text-2xl font-bold text-text-primary mb-2 transition-transform duration-300
                      transform-gpu ${s===a.id?"translate-y-0":"translate-y-2"}
                    `,children:a.title}),e.jsx("div",{className:`
                      overflow-hidden transition-all duration-500
                      ${s===a.id?"max-h-24 opacity-100":"max-h-0 opacity-0"}
                    `,children:e.jsxs("p",{className:"text-text-secondary text-sm line-clamp-3",children:[a.content.replace(/<[^>]+>/g,"").slice(0,150),"..."]})}),a.audio_url&&e.jsx("div",{className:`
                        absolute top-4 right-4 transition-all duration-300
                        transform-gpu ${s===a.id?"translate-y-0 opacity-100":"translate-y-2 opacity-0"}
                      `,children:e.jsxs("span",{className:"bg-accent text-white px-3 py-1.5 rounded-full text-sm font-medium flex items-center space-x-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"})}),e.jsx("span",{children:"Audio available"})]})})]})]})},a.id):null)})]})})}export{w as default};
